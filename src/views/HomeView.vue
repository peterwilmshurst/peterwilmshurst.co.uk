<template>
  <main id="container">
    <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 445.5 401.06" id="svgImage">
      <path
        d="M376 471.26h65.9a3.38 3.38 0 0 1 3.49 3.49l.22 20.16a3.34 3.34 0 0 1-3.49 3.31h-65.89a3.34 3.34 0 0 1-3.49-3.31l-.22-20.16a3.38 3.38 0 0 1 3.48-3.49Z"
        class="cls-1" transform="translate(-.11 -99)" />
      <path
        d="M144.7 5a3.65 3.65 0 0 1 3.49-3.56h22A3.66 3.66 0 0 1 173.68 5v123.9a3.65 3.65 0 0 1-3.49 3.55h-22a3.64 3.64 0 0 1-3.49-3.55ZM183.06 5a3.53 3.53 0 0 1 3.49-3.56h21.84a3.65 3.65 0 0 1 3.5 3.56v100h43.68a3.53 3.53 0 0 1 3.49 3.56v20.4a3.52 3.52 0 0 1-3.49 3.55h-69a3.52 3.52 0 0 1-3.49-3.55ZM20.8 138.46a3.51 3.51 0 0 1 3.3-2.94h2.94a4.06 4.06 0 0 1 3.12 1.84l42.58 79.3h.37l42.58-79.3a4.07 4.07 0 0 1 3.13-1.84h2.93a3.52 3.52 0 0 1 3.31 2.94l20.74 123.35a3.37 3.37 0 0 1-3.49 4h-21.66a3.75 3.75 0 0 1-3.49-2.94l-8.27-56.68h-.37L77.7 265.66a4.29 4.29 0 0 1-3.12 2h-3.31a4 4 0 0 1-3.12-2l-31-59.47h-.36l-8.1 56.72a3.57 3.57 0 0 1-3.49 2.94H3.54a3.36 3.36 0 0 1-3.48-4Z"
        class="cls-2" />
      <path
        d="m141.75 248.41 8.62-15.24c1.47-2.38 5-2 6.25-1.1.73.37 14 10.1 26.06 10.1 7.34 0 12.66-4.59 12.66-11 0-7.71-6.42-13.58-18.9-18.53-15.79-6.25-35.61-18.54-35.61-40.57 0-18.17 14.13-36.53 42.4-36.53 19.09 0 33.78 9.73 39.28 13.77 2.2 1.28 1.84 4.59 1.1 5.87l-9.36 14.14c-1.28 2-4.59 3.67-6.24 2.38-1.65-.91-15.05-11-26.25-11-6.61 0-11.56 4.41-11.56 9.36 0 6.79 5.5 11.93 20 17.81 14.31 5.69 37.07 16.88 37.07 41.85 0 18.9-16.33 38-43.32 38-23.86 0-37.07-9.91-41.3-14.13-1.82-1.88-2.37-2.59-.9-5.18Z"
        class="cls-2" />
      <path
        d="M225.95 140.85a3.61 3.61 0 0 1 3.49-3.49h21.84a3.49 3.49 0 0 1 3.49 3.49v46.25h52.49v-46.25a3.49 3.49 0 0 1 3.49-3.49h21.85a3.61 3.61 0 0 1 3.48 3.49v121.51a3.61 3.61 0 0 1-3.48 3.49h-21.85a3.49 3.49 0 0 1-3.49-3.49v-48.28h-52.49v48.28a3.49 3.49 0 0 1-3.49 3.49h-21.84a3.61 3.61 0 0 1-3.49-3.49ZM0 274.22a3.62 3.62 0 0 1 3.49-3.49h22.58a3.49 3.49 0 0 1 3.49 3.49v74.34c0 12.85 9.54 23.13 22.58 23.13 13.21 0 22.94-10.28 22.94-23.13v-74.34a3.49 3.49 0 0 1 3.49-3.49h22.57a3.61 3.61 0 0 1 3.49 3.49V350c0 27.9-23.49 51-52.49 51C23.32 401.06 0 377.93 0 350ZM113.98 274.22a3.49 3.49 0 0 1 3.49-3.49h54.88c22 0 40 17.81 40 39.65 0 16.89-11.2 30.47-27.17 36.89l25.15 46.63a3.47 3.47 0 0 1-3.12 5.32h-24.39a3.39 3.39 0 0 1-2.94-1.65l-24.42-48.64H142.8v46.8a3.61 3.61 0 0 1-3.49 3.49h-21.84a3.49 3.49 0 0 1-3.49-3.49Zm56 51.39c7.52 0 13.95-7 13.95-14.68A14.07 14.07 0 0 0 169.97 297H142.8v28.63Z"
        class="cls-2" />
      <path
        d="m209.42 381.78 8.63-15.23c1.47-2.39 5-2 6.24-1.1.74.36 13.95 10.09 26.07 10.09 7.34 0 12.66-4.59 12.66-11 0-7.71-6.42-13.59-18.91-18.54-15.78-6.24-35.61-18.54-35.61-40.57 0-18.17 14.14-36.52 42.41-36.52 19.09 0 33.77 9.72 39.28 13.76 2.2 1.29 1.83 4.59 1.1 5.88l-9.4 14.12c-1.29 2-4.59 3.67-6.24 2.39-1.66-.92-15.05-11-26.25-11-6.61 0-11.57 4.41-11.57 9.36 0 6.8 5.51 11.94 20 17.81 14.32 5.69 37.08 16.89 37.08 41.85 0 18.91-16.34 38-43.32 38-23.86 0-37.08-9.92-41.3-14.14-1.79-1.85-2.34-2.59-.87-5.16Z"
        class="cls-2" />
      <path
        d="M313.67 297.72h-26.24a3.49 3.49 0 0 1-3.49-3.49v-20a3.49 3.49 0 0 1 3.49-3.49h81.46a3.49 3.49 0 0 1 3.49 3.49v20a3.49 3.49 0 0 1-3.49 3.49h-26.21v98a3.62 3.62 0 0 1-3.49 3.49h-22a3.62 3.62 0 0 1-3.49-3.49ZM125.06 129.22a3.52 3.52 0 0 1-3.31 2.94h-2.93a4 4 0 0 1-3.12-1.84L73.11 51h-.37l-42.58 79.32a4 4 0 0 1-3.12 1.84H24.1a3.51 3.51 0 0 1-3.3-2.94L.06 5.87a3.36 3.36 0 0 1 3.48-4H25.2a3.73 3.73 0 0 1 3.49 2.93l8.26 56.72h.37L68.15 2a4.33 4.33 0 0 1 3.13-2h3.3a4 4 0 0 1 3.12 2l31 59.47h.37l8.07-56.72a3.58 3.58 0 0 1 3.49-2.93h21.66a3.36 3.36 0 0 1 3.49 4Z"
        class="cls-2" />
    </svg>
  </main>
</template>

<script lang="ts">
import { onMounted, onBeforeUnmount } from 'vue';
import { computed } from 'vue';
import { useMainStore } from '@/store';

export default {
  setup() {
    const store = useMainStore();
    const cls1 = computed(() => store.toggleClicked ? '#39b54a' : 'black');
    const cls2 = computed(() => store.toggleClicked ? '#2a263d' : 'red');

    const rotate = (event: MouseEvent) => {
      const x = (event.pageX - window.innerWidth / 2) / 20;
      const y = (event.pageY - window.innerHeight / 2) / -20;
      const svgImage = document.getElementById('svgImage');
      if (svgImage instanceof SVGElement) {
        svgImage.style.transform = `rotateX(${y}deg) rotateY(${x}deg)`;
      }
    };

    onMounted(() => {
      window.addEventListener('mousemove', rotate);
    });

    onBeforeUnmount(() => {
      window.removeEventListener('mousemove', rotate);
    });
    return {
      cls1,
      cls2
    };
  }
}
</script>

<style scoped>
#container {
  position: relative;
  width: 500px;
  height: 500px;
  perspective: 1000px;
}

#svgImage {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform 0.1s ease-out;
}

.cls-1 {
  fill: v-bind(cls1);
}

.cls-2 {
  fill: v-bind(cls2);
}
</style>
